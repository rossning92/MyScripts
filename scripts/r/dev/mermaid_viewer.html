<html>
  <body>
    <div id="panzoom-element">
      <pre class="mermaid">{{MERMAID_CODE}}</pre>
    </div>
    <script src="https://unpkg.com/@panzoom/panzoom@4.6.0/dist/panzoom.min.js"></script>
    <script type="module">
      import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.esm.min.mjs";
      mermaid.initialize({
        // https://mermaid.js.org/config/schema-docs/config.html
        startOnLoad: true,
        theme: "neutral",
        flowchart: {
          // https://mermaid.js.org/config/schema-docs/config-defs-flowchart-diagram-config.html
          diagramPadding: "0",
          nodeSpacing: "4",
          padding: "2",
          rankSpacing: "32",
          securityLevel: "loose",
        },
        themeVariables: {
          fontSize: "12",
        },
      });

      // https://github.com/timmywil/panzoom
      const elem = document.getElementById("panzoom-element");
      const panzoom = Panzoom(elem, {
        excludeClass: "nodeLabel",
        maxScale: 5,
      });
      elem.parentElement.addEventListener("wheel", panzoom.zoomWithWheel);
      elem.style.userSelect = "auto";
      document.body.style.userSelect = "auto";
    </script>
  </body>
</html>
